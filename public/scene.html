<html>
  <head>
    <meta charset="utf-8" />
    <title>Encuentros - Event</title>
    <meta name="description" content="Encuentros-Event" />

    <link
      rel="shortcut icon"
      type="image/png"
      href="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Ffavicon.jpg?v=1613417208082"
    />

    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.5/socket.io.min.js"></script>
    <script src="easyrtc/easyrtc.js"></script>
    <script src="https://unpkg.com/networked-aframe@^0.6.0/dist/networked-aframe.min.js"></script>

    <script src="https://unpkg.com/aframe-randomizer-components@^3.0.1/dist/aframe-randomizer-components.min.js"></script>
    <script src="https://unpkg.com/aframe-particle-system-component@1.0.5/dist/aframe-particle-system-component.min.js"></script>

    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.0/dist/aframe-extras.min.js"></script>

    <script src="/js/spawn-in-circle.component.js"></script>
    <script src="/js/update-rate.component.js"></script>

    <script src="https://cdn.rawgit.com/zcanter/aframe-gradient-sky/master/dist/gradientsky.min.js"></script>
    <script src="https://rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-shader.min.js"></script>
    
    <script src="https://unpkg.com/aframe-pointcloud-component/dist/aframe-pointcloud-component.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Quicksand&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="style.css" />

    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poiret+One&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Lato&display=swap"
      rel="stylesheet"
    />

    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="HandheldFriendly" content="true" />

    <!--<script>
      
      AFRAME.registerComponent('auto-mute', {
        schema: {},
        init: function () {
          let button = document.getElementById("myButton");
          let icon = document.getElementById("muteIcon");
          let audiortc = 0;
          easyrtc.enableMicrophone(false);
          console.log(audiortc);
          button.innerHTML = "Unmute";
          icon.src =
            "https://cdn.glitch.com/0e65d536-0425-4e6e-8059-1247674b938e%2Ficon-mute.png?v=1592505880753";
        }
        
      });
      
    </script>-->

    <script>
      AFRAME.registerComponent("position-reader", {
        /**
         * We use IIFE (immediately-invoked function expression) to only allocate one
         * vector or euler and not re-create on every tick to save memory.
         */

        init: function() {
          // Set up the tick throttling.
          this.tick = AFRAME.utils.throttleTick(this.tick, 4000, this);
        },

        tick: function() {
          let yPos = this.el.object3D.position.y;

          //console.log(yPos);

          if (yPos > 110) {
            setTimeout(myclose, 5000);
            console.log("closing in 5");
          }

          function myclose() {
            window.close();
          }
        }
      });
    </script>

    <script>
      AFRAME.registerComponent("random-avatar", {
        schema: {},

        init: function() {
          let av1 =
            "https://cdn.glitch.com/e1ded323-c71c-45ea-ac7d-80b787abaaef%2Favatar.glb?v=1601057091379";
          let av2 =
            "https://cdn.glitch.com/e1ded323-c71c-45ea-ac7d-80b787abaaef%2Favatar2.glb?v=1601059578143";
          let av3 =
            "https://cdn.glitch.com/e1ded323-c71c-45ea-ac7d-80b787abaaef%2Favatar3.glb?v=1601059578478";
          var avatars = [av1, av2, av3];

          var randomSrc = avatars[Math.floor(Math.random() * avatars.length)];

          this.el.setAttribute("gltf-model", randomSrc);
        }
      });
    </script>

    <script>
      AFRAME.registerComponent("collision-trigger", {
        schema: {},

        init: function() {
          this.el.addEventListener("stateadded", event => {
            //console.log("comienzo colision");
            //console.log(event.detail);
            let port = event.detail;
            let overlay = document.querySelector('#exitOverlay');
            let test = document.getElementById('test1');
            
            switch (port) {
                case "alDespacho":
                  //test.style.background = "green";
                  document.getElementById('subtrackAlDespacho').style.display = "block";
              
                  break;
                
                case "alFoto":
                  //test.style.background = "green";
                  document.getElementById('subtrackAlFoto').style.display = "block";
              
                  break;
                
                case "alBuhardilla":
                  //test.style.background = "green";
                  document.getElementById('subtrackAlBuhardilla').style.display = "block";
              
                  break;
                
                case "maSotano":
                  //overlay.style.visibility = "visible";
                  //overlay.style.opacity= '1';
                  //window.setTimeout(function(){window.open("https://noir-mdwi7.ondigitalocean.app/woods.html", "_self")}, 2000);
                  //test.style.background = "yellow";
                  document.getElementById('subtrackMaSotano').style.display = "block";
                
                  break;
                
                case "maSalon":
                  //overlay.style.visibility = "visible";
                  //overlay.style.opacity= '1';
                  //window.setTimeout(function(){window.open("https://noir-mdwi7.ondigitalocean.app/woods.html", "_self")}, 2000);
                  //test.style.background = "yellow";
                  document.getElementById('subtrackMaSalon').style.display = "block";
                
                  break;
                
                case "maDespacho":
                  //overlay.style.visibility = "visible";
                  //overlay.style.opacity= '1';
                  //window.setTimeout(function(){window.open("https://noir-mdwi7.ondigitalocean.app/woods.html", "_self")}, 2000);
                  //test.style.background = "yellow";
                  document.getElementById('subtrackMaDespacho').style.display = "block";
                
                  break;
                
                case "paSotano":
                  //test.style.background = "blue"; 
                  document.getElementById('subtrackPaSotano').style.display = "block";
                
                  break;
                
                case "paDespacho":
                  //test.style.background = "blue"; 
                  document.getElementById('subtrackPaDespacho').style.display = "block";
                
                  break;
                
                case "paJardin":
                  //test.style.background = "blue"; 
                  document.getElementById('subtrackPaJardin').style.display = "block";
                
                  break;
                
                case "cocina":
                  //test.style.background = "blue"; 
                  document.getElementById('subtrackCocina').style.display = "block";
                
                  break;
                
              }
          });

          this.el.addEventListener("hitend", e => {
            let test = document.getElementById('test1');
            //console.log("fin colision");
            //test.style.background = "transparent";
            let subs = document.getElementsByClassName('subs');
            
            for(let i= 0; i< subs.length; i++){
              subs[i].style.display = "none";
            };
            
          });
        
        },
      });
    </script>
    
    <!--RADIO COMPONENT -->
    <script>
      AFRAME.registerComponent("radio-streaming", {
        schema: {
          src: {type: 'selector'},
          volume: {type: 'number', default: 1},
          refDist: {type: 'number', default: 5},
          rollOff: {type: 'number', default: 10},
        },

        init: function() {
          let button = document.getElementById("enterButton");
          //let visitRosie = document.querySelector('#roomRosie');
          //let visitPatri = document.querySelector('#roomPatri');
          //visitRosie.addEventListener("click", radioStream);
          //visitPatri.addEventListener("click", radioStream);
          button.addEventListener("click", radioStream);

          var el = this.el;
          var i;
          var sceneEl = this.el.sceneEl;
          var self = this;
          var sound;
          var radioEmitter = this.el.getObject3D("mesh");
          //console.log(radioEmitter);
          var data = this.data;

          function radioStream() {
            //TAKEN FROM AFRAME SOUND COMPONENT

            // Only want one AudioListener. Cache it on the scene.
            var listener = (this.listener =
              sceneEl.audioListener || new THREE.AudioListener());
            sceneEl.audioListener = listener;

            if (sceneEl.camera) {
              sceneEl.camera.add(listener);
            }

            // Wait for camera if necessary.
            sceneEl.addEventListener("camera-set-active", function(evt) {
              evt.detail.cameraEl.getObject3D("camera").add(listener);
            });

            //MINE

            //var audioElement = document.getElementById("vid0");
            var audioElement = data.src;

            /*var stream = new MediaStream("https://cdn.glitch.com/7a6793a5-b8c7-43cd-a82b-b98449c54afd%2FGROUP5.mp3?v=1601211078144");*/

            var positionalAudio = new THREE.PositionalAudio(listener);
            positionalAudio.setMediaElementSource(audioElement);
            /*positionalAudio.setMediaStreamSource(stream);*/
            positionalAudio.setVolume(data.volume);
            positionalAudio.setRefDistance(data.refDist);
            positionalAudio.setRolloffFactor(data.rollOff);
            //positionalAudio.setDirectionalCone(180, 230, 0.1);

            /*var helper = new PositionalAudioHelper(positionalAudio, 0.1);
      positionalAudio.add(helper);*/

            radioEmitter.add(positionalAudio);
          }
        }
      });
    </script>
    
    
    <!--ROOM CHANGE COMPONENT -->
    <script>
      
      AFRAME.registerComponent('room-change', {
        
        schema:{},
        
        update: function(){
          
          let scene = document.querySelector('a-scene');
          let el = this.el;
          let avatar = document.querySelector('#avatar');
          
          scene.addEventListener('roomChange', function(){
            
              //console.log("going to Artist");
              el.setAttribute('position', {x:49.8, y:15.3, z:-17.9});
              //el.object3D.rotation.y = THREE.Math.degToRad(90);
              //el.setAttribute('movement-controls', 'speed', 0.2);
              el.emit('resetorientation', {grad: -250});
            
            
            
          });
          
        },
        
        /*greetRoom: function(room){
          let greeting = document.querySelector('#greeting');
          if(room=="red"){
            greeting.innerHTML = "Welcome to the red room, you creepy little piece of shit.";
            greeting.style.display = "block";
            greeting.style.color = room;
          } else if(room=="blue"){
            
            greeting.innerHTML = "Welcome to the blue room, your highness.";
            greeting.style.display = "block";
            greeting.style.color = room;
            
          }
          return;
        },*/
        
        
      });
    
    </script>
    
    
    <!--RESET ORIENTATION COMPONENT -->
    <script>
    
    AFRAME.registerComponent('resetorientation', {
      init: function () {
        var el = this.el;
        el.addEventListener('resetorientation', function (event) {
          let grad = event.detail.grad;
          var y = el.querySelector('[camera]').getAttribute('rotation').y;
          el.setAttribute('rotation', {y: (-1 * y) + grad });
        });
      }
    });
    
    </script>
    
    
    <!--MODEL OPACITY -->
    <script>
    
      AFRAME.registerComponent('model-opacity', {
        schema: {default: 1.0},
        init: function () {
          this.el.addEventListener('model-loaded', this.update.bind(this));
        },
        update: function () {
          var mesh = this.el.getObject3D('mesh');
          var data = this.data;
          if (!mesh) { return; }
          mesh.traverse(function (node) {
                        
            if (node.isMesh) {
              node.material.opacity = data;
              node.material.transparent = data < 1.0;
              node.material.needsUpdate = true;
              
            }
          });
        }
      });
    
    </script>
    
    
    
  </head>
  <body>
    <!--<audio
      loop
      id="music"
      preload="auto"
      style="display: none"
      src="https://cors-anywhere.herokuapp.com/http://209.97.181.143/stream"
      crossorigin="anonymous"
    ></audio>
    <audio
      loop
      id="music2"
      preload="auto"
      style="display: none"
      src="https://cors-anywhere.herokuapp.com/http://209.97.181.143/stream"
      crossorigin="anonymous"
    ></audio>
    <div id="test1" style="position:absolute; height: 100px; width: 100px; z-index: 30000; background: red"></div>-->
    
    
    <div id="videocontainer" style="position: absolute; z-index: 500000; display: none">
      <video id="vidAlDespacho" class="video" preload="auto" crossorigin="anonymous">
        <source
          src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FcutDespAlv_1.mp4?v=1612892918226"
          type="video/mp4"
        />
        <track id="trackAlDespacho" class="tracks" label="Español" kind="subtitles" srclang="es" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FdespachoAlvaroENG.vtt?v=1613681955122" default>

        Your browser does not support the video tag.
      </video>

      <video id="vidAlFoto" class="video" preload="auto" crossorigin="anonymous">
        <source
          src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FcutFotoAlv.mp4?v=1613122927899"
          type="video/mp4"
        />
        <track id="trackAlFoto" class="tracks" label="Español" kind="subtitles" srclang="es" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FfotoAlvaroENG.vtt?v=1613681955634" default>

        Your browser does not support the video tag.
      </video>

      <video id="vidAlCocina" class="videoCocina" preload="auto" crossorigin="anonymous">
        <source
          src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FcocinaAlvaro.mp4?v=1613129368642"
          type="video/mp4"
        />
        <track id="trackCocina" class="tracks" label="Español" kind="subtitles" srclang="es" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FcocinaJunto2ENG.vtt?v=1613681955057" default>
        Your browser does not support the video tag.
      </video>

      <video id="vidAlBuhardilla" class="video" preload="auto" crossorigin="anonymous">
            <source
              src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FcutBuhardillaAlv.mp4?v=1613122929435"
              type="video/mp4"
            />
            <track id="trackAlBuhardilla" class="tracks" label="Español" kind="subtitles" srclang="es" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FbuhardillaENG.vtt?v=1613681956528" default>

            Your browser does not support the video tag.
      </video>
      
      
      <video id="vidMaDespacho" class="video" preload="auto" crossorigin="anonymous">
        <source
          src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FcutDespMama.mp4?v=1613122923762"
          type="video/mp4"
        />
        <track id="trackMaDespacho" class="tracks" label="Español" kind="subtitles" srclang="es" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FdespachoMamaENG.vtt?v=1613681955173" default>

        Your browser does not support the video tag.
      </video>
      
      <video id="vidMaSalon" class="video" preload="auto" crossorigin="anonymous">
        <source
          src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FsalonMama.mp4?v=1613122929685"
          type="video/mp4"
        />
        <track id="trackMaSalon" class="tracks" label="Español" kind="subtitles" srclang="es" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FsalonMamaENG.vtt?v=1613681956056" default>

        Your browser does not support the video tag.
      </video>
      
      <video id="vidMaSotano" class="video" preload="auto" crossorigin="anonymous">
        <source
          src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FsotanoMama.mp4?v=1613122929858"
          type="video/mp4"
        />
        <track id="trackMaSotano" class="tracks" label="Español" kind="subtitles" srclang="es" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FsotanoMamaENG.vtt?v=1613681956717" default>

        Your browser does not support the video tag.
      </video>
      
      <video id="vidMaCocina" class="videoCocina" preload="auto" crossorigin="anonymous">
        <source
          src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FcocinaMama.mp4?v=1613129366163"
          type="video/mp4"
        />

        Your browser does not support the video tag.
      </video>
      
      
      <video id="vidPaDespacho" class="video" preload="auto" crossorigin="anonymous">
        <source
          src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FcutDespPapa.mp4?v=1613122923762"
          type="video/mp4"
        />
        <track id="trackPaDespacho" class="tracks" label="Español" kind="subtitles" srclang="es" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FdespachoPapaENG.vtt?v=1613681955419" default>

        Your browser does not support the video tag.
      </video>
      
      <video id="vidPaSotano" class="video" preload="auto" crossorigin="anonymous">
        <source
          src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FsotanoPapa.mp4?v=1613122930155"
          type="video/mp4"
        />
        <track id="trackPaSotano" class="tracks" label="Español" kind="subtitles" srclang="es" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FsotanoPapaENG.vtt?v=1613681956262" default>

        Your browser does not support the video tag.
      </video>
      
      <video id="vidPaCocina" class="videoCocina" preload="auto" crossorigin="anonymous">
        <source
          src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FcocinaPapa.mp4?v=1613129368848"
          type="video/mp4"
        />

        Your browser does not support the video tag.
      </video>
      
      <video id="vidPaJardin" class="video" preload="auto" crossorigin="anonymous">
        <source
          src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FporchePapa.mp4?v=1613122934822"
          type="video/mp4"
        />
        <track id="trackPaJardin" class="tracks" label="Español" kind="subtitles" srclang="es" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FporchePapaENG.vtt?v=1613681955801" default>

        Your browser does not support the video tag.
      </video>
      
      <!--<video id="vidCocina" class="video" preload="auto" loop crossorigin="anonymous">
        <source
          src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FcocinaJuntoSilencioRedux.mp4?v=1613128812706"
          type="video/mp4"
        />
        
        Your browser does not support the video tag.
      </video>-->
      
    </div>
    
    <div id="subtitles">
      <div class="subs" id="subtrackAlDespacho"></div>
      <div class="subs" id="subtrackAlFoto"></div>
      <div class="subs" id="subtrackAlBuhardilla"></div>
      <div class="subs" id="subtrackMaDespacho"></div>
      <div class="subs" id="subtrackMaSalon"></div>
      <div class="subs" id="subtrackMaSotano"></div>
      <div class="subs" id="subtrackPaDespacho"></div>
      <div class="subs" id="subtrackPaSotano"></div>
      <div class="subs" id="subtrackPaJardin"></div>
      <div class="subs" id="subtrackCocina"></div>
    </div>
    
    <div id="enterOverlay">
    
      <p style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%)">
        loading...
      </p>
      
    </div>
    
    <div id="mainCont">
      
            
      <div id="scene">
        <a-scene
          vr-mode-ui="enterVRButton: #VRButton"
          networked-scene="
      room: audio;
      adapter: easyrtc;
      audio: true;
      debug: true;                  
    "
          update-rate
          loading-screen="enabled: false"
          
        >
          <a-assets>
                  
            <!-- MODEL CASA -->
            <a-asset-item id="model1" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FDespachoalvaro_Model_1redto300nB.ply?v=1612867221133"></a-asset-item>
            <a-asset-item id="model2" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Fsalon_Model_1M_rednB.ply?v=1612867235737"></a-asset-item>
            <a-asset-item id="model3" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FDespachoMama2_Model_1Mredto300nB.ply?v=1612867225545"></a-asset-item>
            <a-asset-item id="model4" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Fgaraje_Model_1Mtextredto300nB.ply?v=1612867215065"></a-asset-item>
            <a-asset-item id="model5" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Fdespachopapa_Model_1Mredto300nB.ply?v=1612867220920"></a-asset-item>
            <a-asset-item id="model6" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Fbuhardilla_Model_1M_redto300nB.ply?v=1612867162034"></a-asset-item>
            <a-asset-item id="model7" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FCocina_Model_2_1Mredto300nB.ply?v=1612867218562"></a-asset-item>
            <a-asset-item id="model8" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Ffotograf_aestudio_Model_1Mredto300nB.ply?v=1612867184626"></a-asset-item>
            <a-asset-item id="model9" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Fporche_Model_1Mredto300nB.ply?v=1612867226183"></a-asset-item>
            
            <!-- MODEL PERSONAS-->
            
            <a-asset-item id="mAlCocina" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FalvaroCocinaredto100.ply?v=1613094047932"></a-asset-item>
            <a-asset-item id="mAlDespacho" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FalvaroDespachoredto100.ply?v=1613094071462"></a-asset-item>
            <a-asset-item id="mAlFoto" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FalvaroFotoredto100.ply?v=1613094072410"></a-asset-item>
            <a-asset-item id="mAlBuhardilla" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FalvaroBuhardillaredto100.ply?v=1613094056898"></a-asset-item>
            <a-asset-item id="mMaCocina" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FmamaCocinaredto100.ply?v=1613094068237"></a-asset-item>
            <a-asset-item id="mMaDespacho" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FmamaDespachoredto100.ply?v=1613094048173"></a-asset-item>
            <a-asset-item id="mMaSalon" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FmamaSalonredto100.ply?v=1613053046091"></a-asset-item>
            <a-asset-item id="mMaSotano" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FmamaSotanoredto100.ply?v=1613094037856"></a-asset-item>
            <a-asset-item id="mPaCocina" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FpapaCocinaredto100.ply?v=1613094055734"></a-asset-item>
            <a-asset-item id="mPaDespacho" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FpapaDespachoredto100.ply?v=1613094075118"></a-asset-item>
            <a-asset-item id="mPaSotano" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FpapaStairsredto100.ply?v=1613045051289"></a-asset-item>
            <a-asset-item id="mPaJardin" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FpapaStandredto100.ply?v=1613094074696"></a-asset-item>
            
            
            <a-asset-item id="avatarPixel" src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Favatartest3mod.ply?v=1613219775054"></a-asset-item>
            
            <!--AMBIENCE-->
            
            <audio
              id="despachoAlvaroAmbience"
              src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Fdespachoalvaroambience.mp3?v=1612870444793"
              crossorigin="anonymous"
            ></audio>
            <audio
              id="sotanoAmbience"
              src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Fsotanoambience.mp3?v=1612870447113"
              crossorigin="anonymous"
            ></audio>
            
            <audio
              id="fotografiaAmbience"
              src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Ffotografiaambience.mp3?v=1612870446816"
              crossorigin="anonymous"
            ></audio>
            
            <audio
              id="despachoMamaAmbience"
              src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Fdespachomamaambience.mp3?v=1612872024081"
              crossorigin="anonymous"
            ></audio>
            <audio
              id="buhardillaAmbience"
              src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Fbuhardillaambience.mp3?v=1612872026262"
              crossorigin="anonymous"
            ></audio>
            
            <audio
              id="salonAmbience"
              src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Fsalonambience.mp3?v=1612872027123"
              crossorigin="anonymous"
            ></audio>
            
            <audio
              id="despachoPapaAmbience"
              src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Fdespachopapaambience.mp3?v=1612872026939"
              crossorigin="anonymous"
            ></audio>
            <audio
              id="cocinaAmbience"
              src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Fcocinaambience.mp3?v=1612872023173"
              crossorigin="anonymous"
            ></audio>
            
            <audio
              id="jardinAmbience"
              src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Fjardinambience.mp3?v=1612872024743"
              crossorigin="anonymous"
            ></audio>        
            

            <!-- Templates -->

            <!-- Avatar -->
            <template id="player-template">
              <a-entity></a-entity>
            </template>

            <template id="head-template">
              <a-entity
                class="avatar"
                networked-audio-source="refDistance: 1; rolloffFactor: 2"
              >
                <a-entity class="camRig">
                  <!--<a-entity
                    position="0 -1.6 0"
                    rotation="0 90 0"
                    random-avatar
                    scale="1 1.3 1"
                  ></a-entity>-->
                  <a-pointcloud class="head" src="#avatarPixel" size="0.3" scale="0.5 0.5 0.5" opacity="1" depthwrite="false" pointcloud="depthWrite: true" rotation="-90 0 180"></a-pointcloud>
                  <!--<a-sphere class="head" position="0 -0.5 0" material="color: #bdbdbd" scale="1 1 1">
                    <a-entity class="face" position="0 0.3 -0.5">
                            <a-sphere
                              class="eye"
                              color="#000"
                              position="0.3 0.1 -0.35"
                              scale="0.12 0.12 0.12"
                              segments-height="5"
                              segments-width="5"
                            ></a-sphere>
                            <a-sphere
                              class="eye"
                              color="#000"
                              position="-0.3 0.1 -0.35"
                              scale="0.12 0.12 0.12"
                              segments-height="5"
                              segments-width="5"
                            ></a-sphere>
                    </a-entity>
                  </a-sphere>-->
                  <a-entity
                    class="nametag"
                    text="value: you; align: center; width: 10; color: #bdbdbd"
                    position="0 0.95 0"
                    rotation="0 180 0"
                  ></a-entity>
                  <!--<a-entity
                    class="chattext"
                    text="value: you; align: center; width: 3"
                    position="0 0.7 0"
                    rotation="0 180 0"
                  ></a-entity>-->
                </a-entity>
              </a-entity>
            </template>


          </a-assets>

          <a-entity
            id="player"
            networked="template:#player-template;attachTemplateToLocal:false;"
            movement-controls="speed: 0.2; fly: true"
            position="-32.6 17.6 37.7"
            rotation="-1.8 -35.2 0"
            scale="1 1 1"
            resetorientation
            room-change
          >
            <a-entity
              id="avatar"
              networked="template:#head-template;attachTemplateToLocal:false;"
              camera="userHeight: 1.6"
              look-controls
              position="0 1.6 0"
            >
              <a-entity class="avatar" networked-audio-source></a-entity>
              <a-pointcloud class="head"></a-pointcloud>
              <!--<a-sphere class="head"></a-sphere>-->
              <a-sphere
                id="playerCollider"
                visible="false"
                scale="0.3 0.3 0.3"
                collision-trigger
              ></a-sphere>
              <a-entity class="nametag" text="value: "></a-entity>
              <!--<a-entity class="chattext" text=""></a-entity>-->
            </a-entity>
          </a-entity>
          
          <!-- composition -->
          <a-entity position="0 2.25 -15" particle-system="preset: dust; size: 0.5"></a-entity>
          <a-entity light="type: ambient; color: #CCC"></a-entity>
          <a-entity light="type: point; color: #CCC"></a-entity>
          
          <!--DespachoAlvaro animation="property: model-opacity; dur:1000; from: 1; to: 0; loop: true"-->
          <a-pointcloud class="modelFirst bro" scale="1 1 1" position="0 -3 0" rotation="-90 0 0" src="#model1" size="0.1" opacity="1" depthwrite="false">
            
            <a-sphere position="-8 0.3 6" visible="false" sound="src: #despachoAlvaroAmbience; autoplay: true; volume: 1; loop: true; refDistance: 15; rolloffFactor: 5"></a-sphere>          
            
          </a-pointcloud>
          
          <!--Salon-->
          <a-pointcloud class="modelFirst mum" scale="1.12562 1.12562 1.12562" position="1.34709 11.05206 6.60284" rotation="-90 87.65 0" src="#model2" size="0.1" opacity="1" depthwrite="false">
          
            <a-sphere position="-8 0.3 6" visible="false" sound="src: #salonAmbience; autoplay: true; volume: 1; loop: true; refDistance: 15; rolloffFactor: 5"></a-sphere>
            <a-sphere position="9 1 6" visible="false" sound="src: #salonAmbience; autoplay: true; volume: 1; loop: true; refDistance: 15; rolloffFactor: 5"></a-sphere>
            
          </a-pointcloud>
          
          <!--DespachoMama-->
          <a-pointcloud class="modelFirst mum" scale="1.1 1.1 1.1" position="-0.67 25.967 -12.085" rotation="-90 173 0" src="#model3" size="0.1" opacity="1" depthwrite="false">
          
            <a-sphere position="1.5 1.5 6" visible="false" sound="src: #despachoMamaAmbience; autoplay: true; volume: 1; loop: true; refDistance: 15; rolloffFactor: 5"></a-sphere>
          
          </a-pointcloud>
          
          <!--Garaje-->
          <a-pointcloud class="modelFirst mum" scale="0.653 0.653 0.653" position="-0.919 -3 -30.195" rotation="-90 3.9 0" src="#model4" size="0.1" opacity="1" depthwrite="false">
            
            <a-sphere position="-22 4.8 13" visible="false" sound="src: #sotanoAmbience; autoplay: true; volume: 1; loop: true; refDistance: 15; rolloffFactor: 5"></a-sphere>
                      
          </a-pointcloud>
          
          <!--DespachoPapa-->
          <a-pointcloud class="modelFirst dad" scale="0.7 0.7 0.7" position="-56.8 16.1 13.1" rotation="-90 -90 0" src="#model5" size="0.1" opacity="1" depthwrite="false">
          
            <a-sphere position="-8 40 6" visible="false" sound="src: #despachoPapaAmbience; autoplay: true; volume: 1; loop: true; refDistance: 15; rolloffFactor: 5"></a-sphere>
            
          </a-pointcloud>
          
          <!--Buhardilla-->
          <a-pointcloud class="modelFirst bro" scale="0.7 0.7 0.7" position="-7.9 39.5 15.36" rotation="-90 -90 0" src="#model6" size="0.1" opacity="1" depthwrite="false">
          
            <a-sphere position="2 0.3 11.5" visible="false" sound="src: #buhardillaAmbience; autoplay: true; volume: 1; loop: true; refDistance: 15; rolloffFactor: 5"></a-sphere>
          
          </a-pointcloud>
          
          <!-- Cocina -->
          <a-pointcloud class="cocina" scale="1 1 1" position="-13.17 11.68 -30.93" rotation="-90 -90 0" src="#model7" size="0.1" opacity="1" depthwrite="false">
          
            <a-sphere position="1 5.5 8" visible="false" sound="src: #cocinaAmbience; autoplay: true; volume: 1; loop: true; refDistance: 15; rolloffFactor: 5"></a-sphere>
            
            <a-sphere class="ports" id="portCocina" visible="false" scale="4 4 0.25" position="3.5 0.7 8" sphere-collider="objects: #playerCollider; state: cocina; radius: 3"></a-sphere>
                                  
          </a-pointcloud>
          
          <!-- Fotografía -->
          <a-pointcloud class="modelFirst dad bro" scale="1.39359 1.39359 1.39359" position="-22.36026 -2.77955 -7.64953" rotation="-90 0 0" src="#model8" size="0.1" opacity="1" depthwrite="false">
          
            <a-sphere position="-4 0.3 6" visible="false" sound="src: #fotografiaAmbience; autoplay: true; volume: 1; loop: true; refDistance: 15; rolloffFactor: 5"></a-sphere>
                        
          </a-pointcloud>
          
          <!-- Porche -->
                    
          <a-pointcloud class="modelFirst dad" scale="2.4 2.4 2.4" position="21.93186 7.69 -12.10759" rotation="-89.99963750135457 88.564951182347 0" src="#model9" size="0.1" opacity="1" depthwrite="false" pointcloud="depthWrite: true">
          
            <a-sphere position="-4 0.3 6" visible="false" sound="src: https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Fjardinambience.mp3?v=1612872024743; autoplay: true; loop: true; refDistance: 15; rolloffFactor: 5" material="" geometry=""></a-sphere>
            
          </a-pointcloud>
          
          <a-box id="cubeTest" material="color: red; visible: false"></a-box>
          
          
          
                    
          <a-pointcloud class="modelFirst bro" scale="0.22 0.22 0.22" position="-2.16791 -4.34872 -12.34094" src="#mAlDespacho" size="0.015" opacity="1" depthwrite="false" pointcloud="depthWrite: true" rotation="-90 0 0">
          
            <a-sphere
              class="ports"
              id="portAlDespacho"
              visible="false"
              scale="8 8 8"
              position="0 2.5 30"
              sphere-collider="objects: #playerCollider; state: alDespacho; radius: 4"
              radio-streaming="src: #vidAlDespacho; refDist: 10; rollOff: 20;"
              ></a-sphere>
          
          </a-pointcloud>

          <a-pointcloud class="modelFirst bro" scale="0.22 0.22 0.22" position="-23.40734 -4.04066 -1.9286" src="#mAlFoto" size="0.015" opacity="1" depthwrite="false" pointcloud="depthWrite: true" rotation="-90 180 0">
          
            <a-sphere
              class="ports"
              id="portAlFoto"
              visible="false"
              scale="8 8 8"
              position="0 2.5 30"
              sphere-collider="objects: #playerCollider; state: alFoto; radius: 4"
              radio-streaming="src: #vidAlFoto; refDist: 10; rollOff: 20;"
              ></a-sphere>
            
          </a-pointcloud>

          <a-pointcloud class="modelCocina" scale="0.22 0.22 0.22" visible="false" position="-15.48076 10.18215 -34.93376" src="#mAlCocina" size="0.015" opacity="1" depthwrite="false" pointcloud="depthWrite: true" rotation="-90 0 0">
          
            <a-sphere
              class="ports"
              id="portAlCocina"
              visible="false"
              scale="8 8 8"
              position="0 2.5 30"
              radio-streaming="src: #vidAlCocina; refDist: 10; rollOff: 20;"
              ></a-sphere>
            
            
          
          </a-pointcloud>

          <a-pointcloud class="modelFirst bro" scale="0.22 0.22 0.22" position="-7.01614 39.87547 23.31214" src="#mAlBuhardilla" size="0.015" opacity="1" depthwrite="false" pointcloud="depthWrite: true" rotation="-90 180 0">
          
            <a-sphere
              class="ports"
              id="portAlBuhardilla"
              visible="false"
              scale="8 8 8"
              position="0 2.5 30"
              sphere-collider="objects: #playerCollider; state: alBuhardilla; radius: 4"
              radio-streaming="src: #vidAlBuhardilla; refDist: 10; rollOff: 20;"
              ></a-sphere>
          
          </a-pointcloud>


          <a-pointcloud class="modelFirst dad" scale="0.16 0.16 0.16" position="-23.85058 -2.51972 -21.21383" src="#mPaSotano" size="0.015" opacity="1" depthwrite="false" pointcloud="depthWrite: true" rotation="-90 180 0">
          
            <a-sphere
              class="ports"
              id="portPaSotano"
              visible="false"
              scale="8 8 8"
              position="0 2.5 30"
              sphere-collider="objects: #playerCollider; state: paSotano; radius: 4"
              radio-streaming="src: #vidPaSotano; refDist: 10; rollOff: 20;"
              ></a-sphere>
          
          </a-pointcloud>

          <a-pointcloud class="modelFirst dad" scale="0.16 0.16 0.16" position="-30.68407 9.89295 12.70564" src="#mPaDespacho" size="0.015" opacity="1" depthwrite="false" pointcloud="depthWrite: true" rotation="-90 -150 0">
          
            <a-sphere
              class="ports"
              id="portPaDespacho"
              visible="false"
              scale="8 8 8"
              position="0 2.5 30"
              sphere-collider="objects: #playerCollider; state: paDespacho; radius: 4"
              radio-streaming="src: #vidPaDespacho; refDist: 10; rollOff: 20;"
              ></a-sphere>
          
          </a-pointcloud>

          <a-pointcloud class="modelCocina" scale="0.16 0.16 0.16" visible="false" position="-13.27347 10.25907 -20.18879" src="#mPaCocina" size="0.015" opacity="1" depthwrite="false" pointcloud="depthWrite: true" rotation="-90 27.5 0">
          
            <a-sphere
              class="ports"
              id="portPaCocina"
              visible="false"
              scale="8 8 8"
              position="0 2.5 30"
              radio-streaming="src: #vidPaCocina; refDist: 10; rollOff: 20;"
              ></a-sphere>
          
          </a-pointcloud>

          <a-pointcloud class="modelFirst dad" scale="0.16 0.16 0.16" position="21.02716 11.57745 6.32867" src="#mPaJardin" size="0.015" opacity="1" depthwrite="false" pointcloud="depthWrite: true" rotation="-90 60 0">
          
            <a-sphere
              class="ports"
              id="portPaJardin"
              visible="false"
              scale="8 8 8"
              position="0 2.5 30"
              sphere-collider="objects: #playerCollider; state: paJardin; radius: 4"
              radio-streaming="src: #vidPaJardin; refDist: 10; rollOff: 20;"
              ></a-sphere>
          
          </a-pointcloud>



          <a-pointcloud class="modelFirst mum" scale="0.2 0.2 0.2" position="-1.08591 -2.74017 -37.41744" src="#mMaSotano" size="0.015" opacity="1" depthwrite="false" pointcloud="depthWrite: true" rotation="-90 -45 0">
          
            <a-sphere
              class="ports"
              id="portMaSotano"
              visible="false"
              scale="8 8 8"
              position="0 2.5 30"
              sphere-collider="objects: #playerCollider; state: maSotano; radius: 4"
              radio-streaming="src: #vidMaSotano; refDist: 10; rollOff: 20;"
              ></a-sphere>
          
          </a-pointcloud>

          <a-pointcloud class="modelFirst mum" scale="0.2 0.2 0.2" position="-3.49127 11.57745 -12.40416" src="#mMaSalon" size="0.015" opacity="1" depthwrite="false" pointcloud="depthWrite: true" rotation="-90 0 0">
          
            <a-sphere
              class="ports"
              id="portMaSalon"
              visible="false"
              scale="8 8 8"
              position="0 2.5 30"
              sphere-collider="objects: #playerCollider; state: maSalon; radius: 4"
              radio-streaming="src: #vidMaSalon; refDist: 10; rollOff: 20;"
              ></a-sphere>
          
          </a-pointcloud>

          <a-pointcloud class="modelCocina" scale="0.2 0.2 0.2" visible="false" position="-4.25034 11.57745 -30.99463" src="#mMaCocina" size="0.015" opacity="1" depthwrite="false" pointcloud="depthWrite: true" rotation="-90 -90 0">
          
            <a-sphere
              class="ports"
              id="portMaCocina"
              visible="false"
              scale="8 8 8"
              position="0 2.5 30"
              radio-streaming="src: #vidMaCocina; refDist: 10; rollOff: 20;"
              ></a-sphere>
          
          </a-pointcloud>

          <a-pointcloud class="modelFirst mum" scale="0.2 0.2 0.2" position="4.04763 25.15619 -7.25244" src="#mMaDespacho" size="0.015" opacity="1" depthwrite="false" pointcloud="depthWrite: true" rotation="-90 90 0">
          
            <a-sphere
              class="ports"
              id="portMaDespacho"
              visible="false"
              scale="8 8 8"
              position="0 2.5 30"
              sphere-collider="objects: #playerCollider; state: maDespacho; radius: 4"
              radio-streaming="src: #vidMaDespacho; refDist: 10; rollOff: 20;"
              ></a-sphere>
          
          </a-pointcloud>
          
        </a-scene>
      </div>
      
      

      <div id="ingameUItop">
        <!--<button id="myButton">Mute!</button> -->
        <div id="topLeft">
          <div class="ingameIcon" id="muteBack">
            
          </div>
          <img
            class="ingameIcon"
            id="muteIcon"
            src="https://cdn.glitch.com/f44e7d0f-6299-4434-a136-b24515e92365%2Fmaikefeng-jingyin-2.png?v=1603802144461"
            crossorigin="anonymous"
          />
          <button class="UIbutton" id="myButton" onclick="toggleMic()">
            Mute
          </button>
          <!--<img
            class="ingameIcon"
            id="bottopIcon"
            src="https://cdn.glitch.com/b82bb398-3ada-4af4-8aa4-d21adf3a10b0%2F%E7%BC%96%E7%BB%84%209.png?v=1609587718016"
            crossorigin="anonymous"
          />-->
          <input
            class="input"
            id="userName"
            placeholder="Write your new Username here!"
            style="display: none"
          />
          <button class="UIbutton" id="changeButton" onclick="changeUsername()">
            Change Username
          </button>
          <p style="padding-left: 20px; opacity: 0.8;">
            You are 
          </p>
          <p id="bottomUsername">
            Username
          </p>
          
        </div>
        <div id="toprightcorner">
          <img
            id="VRButton"
            class="ingameIcon"
            title="Enter VR Mode"
            src="https://cdn.glitch.com/f44e7d0f-6299-4434-a136-b24515e92365%2FVR.png?v=1603642471053"
            crossorigin="anonymous"
          />
          
          <img
            id="FSbutton"
            class="UIbutton"
            title="Enter Fullscreen Mode"
            src="https://cdn.glitch.com/f44e7d0f-6299-4434-a136-b24515e92365%2Ffullscreen.png?v=1603642470542"
            onclick="toggleFullScreen()"
            crossorigin="anonymous"
          />
          
          <a href="/faq.html" target="_blank">
            <img
              class="ingameIcon"
              id="bottopFAQ"
              src="https://cdn.glitch.com/b82bb398-3ada-4af4-8aa4-d21adf3a10b0%2FInformation%20icon.png?v=1610373853566"
              title="Open FAQs"
              crossorigin="anonymous"
            />
          </a>

          <div id="roomDescription" style="display: flex; flex-direction: column; align-items: flex-end;">
            <div id="artistNameCont" style="position: relative; color: blue; cursor:pointer; z-index: 2000; opacity: 0.6; display: inline-flex; align-items: center;" title="Click here to know more about the artist!" onclick="visitWebsite(this)">
              <img id="linkDescription" class="ingameIcon" src="https://cdn.glitch.com/b82bb398-3ada-4af4-8aa4-d21adf3a10b0%2F%E7%BC%96%E7%BB%84mod.png?v=1609602004088" crossorigin="anonymous"/>
              <!--<p id="artistName"></p>-->
            </div>

            <div id="artistDescriptionCont" style="position: relative; display: none; width: 20vw; font-size: 3px; background: rgba(0, 0, 0, 0.44); border-radius: 20px; z-index: -3000; padding: 10px; flex-direction: column; align-items: flex-end;">
              <p id="artistName">Daniel Vera</p>
              <p id="artistDescription" style="font-size: 0.8rem; padding: 10px;">When thinking about home, rather often the first image that comes to mind is a physical space.
            However, even though that first thought is probably based on the need of a context, 
            the thoughts quickly turn into memories that go beyond the strict materiality of the house. 
            That is, really, where the combination of house and identity turn into what we usually define as home. 

            Home is the virtual house, 
            the time-based abstract layer generated by the inhabitant 
            as a response to the urgency of translating their own identity into space.

            But what happens when the individual perception of that layer collides with that of others?</p>
            </div>
          </div>
          
        </div>
        
        <!--<div id="roomButton" title="Visit the other room!" style="position: absolute; right: 0; top: 50vh; transform: translateY(-50%); background: #4d4d4d; display: none; cursor:default; border-radius: 20px 0px 0px 20px; padding: 0px 20px 0px 15px; align-items: center" onclick="toggleRoom()">
          <p>
            To another<br>room
          </p>
          <img id="arrowRooms" src="https://cdn.glitch.com/b82bb398-3ada-4af4-8aa4-d21adf3a10b0%2F%E7%BC%96%E7%BB%84%2010.png?v=1609602367068" crossorigin="anonymous" style="position: absolute; height:30px; width: auto; right: 0;"/>
        </div>-->
        
      </div>

      <div id="ingameUIbottom">
        <div id="chatDiv">
          <img
            class="ingameIcon"
            id="chatIcon"
            src="https://cdn.glitch.com/f44e7d0f-6299-4434-a136-b24515e92365%2Fchat%20icon.png?v=1603642470653"
            crossorigin="anonymous"
          />
          <!--<input class="input" id="chatBox" placeholder="Here to chat!" />
          <button class="UIbutton" onclick="sendMessage()">
            Send
          </button>-->
          
          <button id="goArtistButton" class="UIbutton" onclick="goToArtist()">
            Talk to Artist
          </button>

          <!--<img
            id="FSbutton"
            class="UIbutton"
            title="Enter Fullscreen Mode"
            src="https://cdn.glitch.com/f44e7d0f-6299-4434-a136-b24515e92365%2Ffullscreen.png?v=1603642470542"
            onclick="toggleFullScreen()"
            crossorigin="anonymous"
          />
          <p id="toggleFS">
            Toggle Fullscreen Mode
          </p>-->
          <!--<img
            id="flybutton"
            class="UIbutton"
            title="Toggle Fly Mode"
            src="https://cdn.glitch.com/7d891b71-2ddb-4312-834c-61fd5d15488c%2FFly2.png?v=1593781464606"
            onclick="fly()"
            crossorigin="anonymous"
          />-->
          <!--<input
            class="input"
            id="chatCenter"
            placeholder="Here to message everybody!"
          />
          <button class="UIbutton" onclick="sendMessageCenter()">
            SPAM THOSE MOTHERFUCKERS
          </button>-->
        </div>
        <div id="bottomCorner">
          <img
            id="ingameLogo"
            src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Flogo.png?v=1613210108666"
            crossorigin="anonymous"
          />
          <!--<img
            class="ingameIcon"
            id="botbottomIcon"
            src="https://cdn.glitch.com/b82bb398-3ada-4af4-8aa4-d21adf3a10b0%2F%E7%BC%96%E7%BB%84%209.png?v=1609587718016"
            crossorigin="anonymous"
          />
          <p id="bottomUsername">
            Username
          </p>-->
        </div>
      </div>

      <div id="enter">
        <div id="enterMenu">
          <div id="enterBack"></div>
          <img
            id="logoEnter"
            src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Flogo.png?v=1613210108666"
            crossorigin="anonymous"
          />
          <!--<h1 id="title">
            PH706
          </h1>
          <img id="subtitle" src="https://cdn.glitch.com/f44e7d0f-6299-4434-a136-b24515e92365%2Ficons-18.png?v=1603653286077" />-->
          
          <div id="textExhibition" style="width: 50vw; text-align: center; background: rgba(0,0,0,0.2); margin: 30px 0px 5px; border-radius: 20px;">
            <pre id="description" class="splitText">
              Welcome to the digital event of the augmented documentary Encuentros.
  
              When thinking about home, rather often the first image that comes to mind is a physical space. 
              However, even though that first thought is probably based on the need of a context, 
              the thoughts quickly turn into memories that go beyond the strict materiality of the house. 
              That is, really, where the combination of house and identity turn into what we usually define as home. 

            </pre>
          </div>

          <div id="instructions">
            <div class="instructionInline">
              <img
              class="iconEnter"
              id="headphoneIcon"
              src="https://cdn.glitch.com/b82bb398-3ada-4af4-8aa4-d21adf3a10b0%2F05.png?v=1609585445643"
              crossorigin="anonymous"
              />
              <img class="textInstruction" src="https://cdn.glitch.com/b82bb398-3ada-4af4-8aa4-d21adf3a10b0%2FPlease%20enter%20with%20Ch.png?v=1609585697725"/>
            </div>
            
            <div class="instructionInline">
              <img
              class="iconEnter"
              id="arrowIcon"
              src="https://cdn.glitch.com/b82bb398-3ada-4af4-8aa4-d21adf3a10b0%2F09.png?v=1609585445513"
              crossorigin="anonymous"
              />
              <img class="textInstruction" src="https://cdn.glitch.com/b82bb398-3ada-4af4-8aa4-d21adf3a10b0%2FUse%20W.S.A.D%20keys%20(or.png?v=1609585697822"/>
            </div>
            
            <div class="instructionInline">
              <img
              class="iconEnter"
              id="micIcon"
              src="https://cdn.glitch.com/b82bb398-3ada-4af4-8aa4-d21adf3a10b0%2F%E7%BC%96%E7%BB%84.png?v=1609585445026"
              crossorigin="anonymous"
              />
              <img class="textInstruction" src="https://cdn.glitch.com/b82bb398-3ada-4af4-8aa4-d21adf3a10b0%2FPlease%20allow%20the%20mic.png?v=1609585697666"/>
            </div>
            
          </div>

          <div id="enterName">
            <input
              id="firstUsername"
              type="text"
              class="enterContent"
              placeholder="Write your Username here!"
              tabindex="1"
            />
            <button
              id="enterButton"
              class="enterContent"
            >
              Loading...
            </button>
          </div>
          
          <!--<div id="copyright" style="position: absolute; bottom: -9vh;">
            <p style="font-size: 0.7rem">
              ©️2021 Maia, All rights reserved.
            </p>            
          </div>-->
          
        </div>
        <!--
        <div id="enterBottomCorner">
          
        
        <a href="https://www.instagram.com/maiadigital.world/" target="_blank">
          <img
            class="maiaSiteLogo"
            src="https://cdn.glitch.com/b82bb398-3ada-4af4-8aa4-d21adf3a10b0%2Flogo-MAIA.png?v=1610378906412"
            crossorigin="anonymous"
          />
        </a>
        <a class="instaLogo" href="https://www.instagram.com/maiadigital.world/" target="_blank">
          <img
            class="instaLogo"
            src="https://cdn.glitch.com/0e65d536-0425-4e6e-8059-1247674b938e%2Finstagram-3.png?v=1592566394569"
            crossorigin="anonymous"
          />
        </a>
        </div>
        
      </div>-->
        
      <div id="enterBottom">
      
        <div id="rca" class="sponsor">
          
          <a href="https://www.rca.ac.uk/study/programme-finder/digital-direction-ma/" target="_blank">
          <img
            class="sponsorLogo"
            src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FRCA%20logo-white.png?v=1613231846247"
            crossorigin="anonymous"
          />
        </a>
          <!--<p style="font-size: 0.6rem;">
            Sponsored by the RCA Fund Scholarship 2019:
          </p>-->
        </div>
        <div id="rarea" class="sponsor">
          
          <a href="https://rareastudio.com/" target="_blank">
          <img
            class="sponsorLogo"
            src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Flogo%20white%20bigger%20text.png?v=1613232678318"
            crossorigin="anonymous"
          />
        </a>
          <!--<p style="font-size: 0.6rem;">
            Project produced by:
          </p>-->
        </div>
        <div id="maia" class="sponsor">
          
          <a href="https://maiadigital.co.uk/" target="_blank">
          <img
            class="sponsorLogo"
            src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FMaia_logo3-white.png?v=1613231265790"
            crossorigin="anonymous"
          />
        </a>
          <!--<p style="font-size: 0.6rem;">
            Event supported by:
          </p>-->
        </div>
        
        </div>
      
      
      <!--<div id="descriptions">
        <div id="descriptionBack"></div>
        <div id="patriIntro" class="introDescriptions">
          <div class="introNameContainer"><p>Patricia Mascarell</p></div>
          <p class="introDescText">
              Is intimacy voluntary? Can intimacy be designed? 
              <br>My work is an approach to my own ideas of the unknown while describing a pattern; a way of hacking a system.
              <br>Some time ago I decided I wanted to measure my levels of intimacy and use that outcome as a pattern for a textile that I could feel. At that time I was in a long distance relationship and I had the need of transforming it into something physical.
              <br>By playing with the line between rationality and irrationality I attempted to make visible and touchable things that are not.
              <br>These days, when it seems that most of us have long distance relationships with everybody but the people we live with, it was important for me to revisit this project through the digital.
          </p>
          <div id="roomPatri" class="introVisit">
            <p class="visitText">
              Loading
            </p>
          </div>
        </div>
        
        <div id="rosieIntro" class="introDescriptions">
          <div class="introNameContainer"><p>Rosie Hook</p></div>
          <p class="introDescText">
              My practice is concerned with the state of constant flux and impermanence, which is visualised through mutating organic forms.
              <br>
              Originating from plastic sculptural works, these have been superimposed into a digital dimension. Ultimately, the forms  act not as individual elements, but as a condition, a tension between material and the immaterial. 
              <br>
              Moving from a three-dimensional model into a digital space acts as a reordering of energy to create new visual information.
              <br>
              You are invited to explore and move about the space to engage with the changing environment.
              <br><br>
              Audio by Nela Pietrová - Sounding Matters - The System Erupts
          </p>
          <div id="roomRosie" class="introVisit">
            <p class="visitText">
              Loading
            </p>
          </div>
        </div>
        
        <div id="loadingFAQ">
          <a href="/faq.html" target="_blank" style="text-decoration: none;">
            <p>
              If the page is taking too long to load, click here to look at the FAQs.
            </p>
          </a>
        </div>
      </div>-->
    
      
      <div id="exit">
        <div id="exitOverlay">
          
        </div>
      </div>
      
      <!--<div id="dateOverlay">
      
        <img id="insiteLogoOpening"
             src="https://cdn.glitch.com/b82bb398-3ada-4af4-8aa4-d21adf3a10b0%2FIN-SITE.png?v=1609585445220"
             crossorigin="anonymous"/>
        <p style="top: 50px; opacity: 0.5;">
          The event starts on the 14th January at 19.00 pm GMT.
        </p>
        <img id="maiaLogoOpening"
             src="https://cdn.glitch.com/b82bb398-3ada-4af4-8aa4-d21adf3a10b0%2Flogo-MAIA.png?v=1610378906412"
             crossorigin="anonymous"/>
        
      
      </div>-->
      
    </div>
    
      <!--<div id="enterVideoCont" style="position: absolute; width: 100vw; height: 100vh; margin: 0; z-index: 100000; background: black; display: none">
      
        <video id="enterVideo" preload="auto" crossorigin="anonymous" style="width: 100vw;">
          
          <source
            src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FProcessStartCutRedux.mp4?v=1613236324790"
            type="video/mp4"
          />

          Your browser does not support the video tag.
        
        </video>
        
        
      </div>
      
      <div id="enterPresentation" style="position: absolute; width: 100vw; height: 100vh; margin: 0; z-index: 100000; background: black;">
        <div id="packagePresentation" style="position: absolute; top: 50%; transform: translateY(-50%); width: 100vw; height: 100vh; margin: 0; display: flex; flex-direction: row; justify-content: space-around; align-items: center">
          
        
          <div class="sponsorEnter">
            <p style="font-size: 0.6rem;">
              Sponsored by the RCA Fund Scholarship 2019:
            </p>
            <a href="https://www.instagram.com/maiadigital.world/" target="_blank">
            <img
              class="sponsorLogoEnter"
              src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FRCA%20logo-white.png?v=1613231846247"
              crossorigin="anonymous"
            />
          </a>

          </div>
          <div class="sponsorEnter">
            <p style="font-size: 0.6rem;">
              Project produced by:
            </p>
            <a href="https://www.instagram.com/maiadigital.world/" target="_blank">
            <img
              class="sponsorLogoEnter"
              src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2Flogo%20white%20bigger%20text.png?v=1613232678318"
              crossorigin="anonymous"
            />
          </a>

          </div>
          <div class="sponsorEnter">
            <p style="font-size: 0.6rem;">
              Event supported by:
            </p>
            <a href="https://www.instagram.com/maiadigital.world/" target="_blank">
            <img
              class="sponsorLogoEnter"
              src="https://cdn.glitch.com/4a983c87-b227-48e7-9c40-3a4001027d0e%2FMaia_logo3-white.png?v=1613231265790"
              crossorigin="anonymous"
            />
          </a>

          </div>
          
        </div>-->
        
      </div>
      
      
    
    <!--MODEL VISIBILITY LOOP-->
    <script>
    
      //let cube = document.querySelector('#cubeTest');
      let videoRef = document.querySelector('#vidAlFoto');
      let videoCocina = document.getElementsByClassName('videoCocina');
      let modelCocina = document.getElementsByClassName('modelCocina');
      let videoCocinaRef = document.getElementById('vidAlCocina');
      let videos = document.getElementsByClassName('video');
      let models = document.getElementsByClassName('modelFirst');
      
      let visibleModels = true;
      
      let round = 0;
      
      videoRef.addEventListener('ended', function(){
          
        console.log('round' + round);
        
        if(round == 1){
          
          console.log('changing visible');
          //cube.setAttribute('material', 'visible', true);
          toggleCocina();
          toggleModels();
          round = 0;
        }else{
          
          for(let o=0; o<videos.length; o++){
            videos[o].play();
          };
          round += 1;
        }
        
        
      });
      
      function toggleCocina(){
        for(let i=0; i<modelCocina.length; i++){
          modelCocina[i].object3D.visible = true;
          
        };
        for(let o=0; o<videoCocina.length; o++){
          videoCocina[o].play();
        };
        
        videoCocinaRef.addEventListener('ended', ()=>{
          for(let i=0; i<modelCocina.length; i++){
            modelCocina[i].object3D.visible = false;
          };
          toggleModels();
        });
        
      }
      
      function toggleModels(){
        
        if(visibleModels){
          console.log('switching models off');
          for(let i=0; i<models.length; i++){
            models[i].object3D.visible = false;
            visibleModels = false;
          }
        }else{
          console.log('switching models on');
          for(let i=0; i<models.length; i++){
            models[i].object3D.visible = true;
            visibleModels = true;
          };
          for(let o=0; o<videos.length; o++){
            videos[o].play();
          };
        }
        
      };
    
    </script>
    
    <!-- OVERLAY -->
    <script>
    
      let enterFade = document.getElementById('enterOverlay');
      let overlayVisible = true;
      
      window.addEventListener('load', function(){
        
        
        toggleOverlay();
        enterFade.parentNode.removeChild(enterFade);
        /*window.setTimeout(function(){
          toggleOverlay();
          enterFade.addEventListener('transitionend', reOpen);
          
        }, 6000);*/
        //enterFade.style.opacity = '0';
        //enterFade.addEventListener('transitionend', () => {enterFade.style.visibility = 'hidden';});
      });
      
      
      /*function reOpen(){
        document.getElementById('enterPresentation').style.display = 'none';
        toggleOverlay();
        enterFade.removeEventListener('transitionend', reOpen);
      }
      
      /*window.setTimeout(function(){
        toggleOverlay();
        enterFade.parentNode.removeChild(enterFade);
      }, 5000);*/
      
      
      function toggleOverlay(){
        
        console.log('overlay');
        if(overlayVisible){
          enterFade.style.opacity = '0';
          overlayVisible = false;
        }else{
          enterFade.style.opacity = '1';
          overlayVisible = true;
        }
        
        //enterFade.addEventListener('transitionend', () => {enterFade.style.visibility = 'hidden';});
        
      }
      
      
    </script>

    <!--<script>
    
      document.getElementById('centerPiece').addEventListener('loaded', function () {
        toggleMic();
      })
    
    </script>-->

    <!--SCHEMAS & MOBILE -->
    <script>
      // On mobile remove elements that are resource heavy
      var isMobile = AFRAME.utils.device.isMobile();
      var isVR = AFRAME.utils.device.checkHeadsetConnected();

      if (isMobile || isVR) {
        var particles = document.getElementById("particles");
        particles.parentNode.removeChild(particles);

        let light1 = document.getElementById("light1");
        light1.parentNode.removeChild(light1);

        let light2 = document.getElementById("light2");
        light2.parentNode.removeChild(light2);

        let light3 = document.getElementById("light3");
        light3.parentNode.removeChild(light3);

        let light4 = document.getElementById("light4");
        light4.parentNode.removeChild(light4);

        /*let scene = document.querySelector('a-scene');
        let entities = scene.querySelectorAll('.animated');
        console.log(entities);
        /*entities.removeAttribute('animation');
        
        /*let animation = entities.getAttribute('animation').enabled;
        console.log(entities);
        animation.setAttribute('animation', 'enabled', false);
        
        let animationDouble = document.querySelectorAll('.doubleAnimated');
        animationDouble.setAttribute('animation', 'enabled', false);
        animationDouble.setAttribute('animation__2', 'enabled', false);*/
      }

      // Define custom schema for syncing avatar color, set by random-color
      NAF.schemas.add({
        template: "#head-template",
        components: [
          "position",
          "rotation",
          {
            selector: ".avatar",
            component: "networked-audio-source",
            property: "refDistance"
          },
          {
            selector: ".nametag",
            component: "text",
            property: "value"
          },
        ]
      });

      NAF.schemas.add({
        template: "#player-template",
        components: ["position", "rotation", "scale"]
      });
    </script>

    <!--AUDIO ICON -->
    <script>
      let button = document.getElementById("myButton");
      let icon = document.getElementById("muteIcon");
      let micBack = document.getElementById('muteBack');
      let audiortc = 1;
      console.log(audiortc);
      micBack.style.display = "block";
      icon.src = "https://cdn.glitch.com/f44e7d0f-6299-4434-a136-b24515e92365%2Fmaikefeng-2.png?v=1603802144461";
      
      /*function checkMic() {
        if (audiortc == 0) {
          easyrtc.enableMicrophone(false);
          sessionStorage.setItem("audiortc", 0);
          audiortc = 0;
          console.log(audiortc);
          button.innerHTML = "Unmute";
          icon.src =
            "https://cdn.glitch.com/f44e7d0f-6299-4434-a136-b24515e92365%2Fmaikefeng-jingyin-2.png?v=1603802144461";
        } else {
          easyrtc.enableMicrophone(true);
          sessionStorage.setItem("audiortc", 1);
          audiortc = 1;
          console.log(audiortc);
          button.innerHTML = "Mute";
          icon.src =
            "https://cdn.glitch.com/f44e7d0f-6299-4434-a136-b24515e92365%2Fmaikefeng-2.png?v=1603802144461";
        }
      }*/
      
      function toggleMic() {
        if (audiortc == 1) {
          easyrtc.enableMicrophone(false);
          audiortc = 0;
          console.log(audiortc);
          button.innerHTML = "Unmute";
          icon.src =
            "https://cdn.glitch.com/f44e7d0f-6299-4434-a136-b24515e92365%2Fmaikefeng-jingyin-2.png?v=1603802144461";
          micBack.style.display = "none";
        } else {
          easyrtc.enableMicrophone(true);
          audiortc = 1;
          console.log(audiortc);
          button.innerHTML = "Mute";
          icon.src =
            "https://cdn.glitch.com/f44e7d0f-6299-4434-a136-b24515e92365%2Fmaikefeng-2.png?v=1603802144461";
          micBack.style.display = "block";
        }
      }
    </script>

    <!--USERNAME-->
    <script>
      //let username = prompt("What's you name mtf", "default");

      let username = sessionStorage.getItem("username");
      console.log("your username is " + username);

      let player = document.getElementById("player");
      let nametag = player.querySelector(".nametag");
      //nametag.setAttribute('text', 'value', username);

      let yourName = document.getElementById("userName");
      let bottomName = document.getElementById("bottomUsername");

      //let greeting = document.getElementById("subtitle");
      //greeting.innerHTML += " " + username + ".";
      
      
      console.log("firstInput = " + username);
      
      if (username != ("" || null)){
      
        document.getElementById("firstUsername").setAttribute("placeholder", username);
      
      };
      
      //CHECK IF USERNAME IS NOT ADMIN
      function checkUsername(){
        
        var firstInput = document.getElementById("firstUsername").value;
        
        
        if(firstInput == "artist"){
          let person = prompt("Please enter password", "Harry Potter");
          if(person == "GoldPH"){
            //console.log('You guessed it');
            window.setTimeout(changeUsernameFirst, 2000);
            //changeUsernameFirst();
            resizeAvatar();
          }else{
            //console.log('Nope')
          };
        }else{
          window.setTimeout(changeUsernameFirst, 2000);
          //changeUsernameFirst();
        };
        
        let vids = document.getElementsByClassName('video');
        
        for(let i=0; i<vids.length; i++){
          vids[i].play();
        }
        
        //let vid = document.getElementsByClassName('video');
        
        //toggleOverlay();
        /*window.setTimeout(function(){
          playVideo();
          toggleOverlay();
        }, 3000);*/
        //playVideo();
        
      };
      
      
      //PASS USERNAME UPON ENTERING
      function changeUsernameFirst() {
        
        var firstInput = document.getElementById("firstUsername").value;
        
        let uitop = document.getElementById("ingameUItop");
        let uibottom = document.getElementById("ingameUIbottom");

        var enter = document.getElementById("enter");
        //let descriptionsEnter = document.querySelector('#descriptions');
        
        if (firstInput != ""){
      
          
          sessionStorage.setItem("username", firstInput);
          
          nametag.setAttribute("text", "value", firstInput);


          yourName.setAttribute("placeholder", firstInput);
          bottomName.innerHTML = firstInput;
          enter.style.display = "none";
          uitop.style.display = "flex";
          uibottom.style.display = "flex";
          //descriptionsEnter.style.display = "flex";
        }else{
        

          nametag.setAttribute("text", "value", username);


          yourName.setAttribute("placeholder", username);
          bottomName.innerHTML = username;
          enter.style.display = "none";
          uitop.style.display = "flex";
          uibottom.style.display = "flex";
          //descriptionsEnter.style.display = "flex";
        };

        /*AFRAME.scenes[0].emit('connect');
        window.setTimeout(function(){
          toggleMic();
        }, 3000);*/
        
      }

      
      //RECALCULATE USERNAME
      function changeUsername() {
        let userName = document.getElementById("userName");
        var input = userName.value;
        var visible = userName.style.display;

        if (visible == "none") {
          console.log(visible);
          userName.style.display = "inline";
        } else {
          console.log(visible);
          nametag.setAttribute("text", "value", input);
          bottomName.innerHTML = input;
          userName.style.display = "none";
          sessionStorage.setItem("username", input);
          console.log("your username is " + input);
        }
      }
      
      
      //PLAY VIDEO
      /*function playVideo(){
        
        let videoEnter = document.getElementById('enterVideo');
        let videoEnterCont = document.getElementById('enterVideoCont');
        
        videoEnterCont.style.display = "block";
        videoEnter.play();
        
        videoEnter.addEventListener('ended', function(){
          
          videoEnterCont.style.display = "none";
          
          for(let i=0; i<videos.length; i++){
          
            videos[i].play();
          
          };
          
          toggleOverlay();
          window.setTimeout(toggleOverlay, 2000);
          
        })
        
      }*/
    </script>

    <!--CHAT-->
    <!--<script>
      let chattext = player.querySelector(".chattext");

      let chatBox = document.getElementById("chatBox");

      function sendMessage() {
        let message = chatBox.value;
        chattext.setAttribute("text", "value", message);

        chatBox.value = "";
        setTimeout(function deleteMessage() {
          chattext.setAttribute("text", "value", "");
        }, 4000);
      }
    </script>-->

    <!-- CENTER SPAM -->

    <!--<script>
      

      function sendMessageCenter() {
        
        var centerMessage = document.querySelectorAll(".centerMessage");

      let chatCenter = document.getElementById("chatCenter");
        
        for (var i = 0; i < centerMessage.length; i++) {
        console.log(centerMessage.length);

        let messageCenter = chatCenter.value;
        centerMessage[i].setAttribute("text", "value", messageCenter);

        chatCenter.value = "";
        setTimeout(function deleteMessage() {
          centerMessage.setAttribute("text", "value", "");
        }, 4000);
      };
      };
    </script>-->

    <!-- FULL SCREEN -->
    <script>
      function toggleFullScreen() {
        var doc = window.document;
        var docEl = doc.documentElement;

        var requestFullScreen =
          docEl.requestFullscreen ||
          docEl.mozRequestFullScreen ||
          docEl.webkitRequestFullScreen ||
          docEl.msRequestFullscreen;
        var cancelFullScreen =
          doc.exitFullscreen ||
          doc.mozCancelFullScreen ||
          doc.webkitExitFullscreen ||
          doc.msExitFullscreen;

        let FSbutton = document.getElementById("FSbutton");

        if (
          !doc.fullscreenElement &&
          !doc.mozFullScreenElement &&
          !doc.webkitFullscreenElement &&
          !doc.msFullscreenElement
        ) {
          requestFullScreen.call(docEl);
          
        } else {
          cancelFullScreen.call(doc);
          
        }
      }
    </script>
    
    <!--TELETRANSPORTATION-->
    
    <script>
    
      function goToArtist(){
                       
        let scene2 = document.querySelector('a-scene'); 
        
        let eventRoom = new CustomEvent("roomChange", {detail: { name: "toArtist" }});
                
        scene2.dispatchEvent(eventRoom);
        //console.log("dispatched");
      }
    
    </script>
    
    <!--<script>
      
      let scene = document.querySelector('a-scene');
      let descriptionsEnter = document.querySelector('#descriptions');
      
      
      var name;
      
      var room;
      
      var audioElement = document.getElementById("music");
      var audioElement2 = document.getElementById("music2");
      
      function chooseRoomRosie(){
                       
                
        let eventRoom = new CustomEvent("roomChange", {detail: { name: "roomRosie" }});
        room = "roomRosie";
        
        scene.dispatchEvent(eventRoom);
        //console.log("dispatched");
        descriptionsEnter.style.display = "none";
        roomButton.style.display = "flex";
        audioElement.play();
        audioElement2.play();
        
      }
      
      function chooseRoomPatri(){
                       
                
        let eventRoom = new CustomEvent("roomChange", {detail: { name: "roomPatri" }});
        room = "roomPatri";
        
        scene.dispatchEvent(eventRoom);
        //console.log("dispatched");
        descriptionsEnter.style.display = "none";
        roomButton.style.display = "flex";
        audioElement.play();
        audioElement2.play();
        
      }
      
      function toggleRoom(){
        
        if(room == "roomPatri"){
          room = "roomRosie";
        }else{room = "roomPatri"};
               
        let eventRoom = new CustomEvent("roomChange", {detail: { name: room }});
        
        
        scene.dispatchEvent(eventRoom);
        //console.log("dispatched");
        
        
      }
      
      scene.addEventListener('roomChange', function(event){
        let name = event.detail.name;
        let artistName = document.querySelector('#artistName');
        let artistDescription = document.querySelector('#artistDescription');
        
        if(name=="roomPatri"){
          artistName.innerHTML = "Patricia Mascarell";
          artistDescription.innerHTML = "Is intimacy voluntary? Can intimacy be designed?<br>My work is an approach to my own ideas of the unknown while describing a pattern; a way of hacking a system.<br>Some time ago I decided I wanted to measure my levels of intimacy and use that outcome as a pattern for a textile that I could feel. At that time I was in a long distance relationship and I had the need of transforming it into something physical.<br>By playing with the line between rationality and irrationality I attempted to make visible and touchable things that are not.<br>These days, when it seems that most of us have long distance relationships with everybody but the people we live with, it was important for me to revisit this project through the digital."
        } else if(name=="roomRosie"){
          artistName.innerHTML = "Rosie Hook";
          artistDescription.innerHTML = "My practice is concerned with the state of constant flux and impermanence, which is visualised through mutating organic forms.<br>Originating from plastic sculptural works, these have been superimposed into a digital dimension. Ultimately, the forms act not as individual elements, but as a condition, a tension between material and the immaterial.<br>Moving from a three-dimensional model into a digital space acts as a reordering of energy to create new visual information.<br>You are invited to explore and move about the space to engage with the changing environment.<br><br>Audio by Nela Pietrová - Sounding Matters - The System Erupts";
        }
        


      });
      
      /*scene.addEventListener('roomChange', function(event){
        let name = event.detail.name;
        let greeting = document.querySelector('#greeting');
        if(name=="red"){
          greeting.innerHTML = "Welcome to the red room, you creepy little piece of shit.";
          greeting.style.display = "block";
          greeting.style.color = name;
        } else if(name=="blue"){

          greeting.innerHTML = "Welcome to the blue room, your highness.";
          greeting.style.display = "block";
          greeting.style.color = name;

        }
        


      });*/
    
    </script>-->
    
    
    <!--SHOW ARTIST DESCRIPTION ON SCENE-->
    <script>
    
      let artistButton = document.querySelector('#artistNameCont');
      let descriptionArtist = document.querySelector('#artistDescriptionCont');
      
      artistButton.addEventListener('mouseover', function(){
        //patriDesc.style.visibility = "visible";
        descriptionArtist.style.display = "flex";
        console.log('Showing Description');
      });
      
      artistButton.addEventListener('mouseout', function(){
        //patriDesc.style.visibility = "hidden";
        descriptionArtist.style.display = "none";
      });
      
      
      let artistName = document.querySelector('#artistNameCont');
      
      function visitWebsite(){
        
          console.log("going to Daniels website");
          window.open("https://danielveravillalobos.wordpress.com/madd/", '_blank');
        
        
      }
    
    
    </script>
    
    
    <!--DATE OPENING
    <script>
    
      var timeDif = new Date(2021, 0, 14, 18, 59).getTime() - Date.now();
      
      if(timeDif>0){
        
        var timeout = setTimeout(function(){
          document.querySelector('#dateOverlay').style.display = "none";
          console.log("Open!");
        }, timeDif);
        console.log("You need to wait!");
        
      }else{document.querySelector('#dateOverlay').style.display = "none"; console.log("Open!");};
      
      
    
    </script>-->
    
    <!--UPDATE ADMIN AVATAR-->
    <script>
    
      function resizeAvatar(){
        
        let player = document.getElementById('player');
        
        player.setAttribute('scale', {x:1.2, y:1.2, z:1.2});
        
        let head = document.querySelector(".head");
        
        head.setAttribute('material', 'color', '#fffee6');
        
      }
      
    
    </script>
    
    
    <!--LOADING-->
    <script>
    
      /*let visitText = document.getElementsByClassName('visitText');
      let visitRosie = document.querySelector('#roomRosie');
      let visitPatri = document.querySelector('#roomPatri');
      let descriptionBack = document.querySelector('#descriptionBack');
      let visitButton = document.getElementsByClassName('introVisit');*/
      
      let enterButton = document.querySelector('#enterButton');
      
      
      let scene = document.querySelector('a-scene');
      
      if (scene.hasLoaded) {
        run();
      } else {
        scene.addEventListener('loaded', run);
        /*window.setTimeout(function(){
          document.querySelector('#loadingFAQ').style.display = "block";
        }, 30000);*/
      }
      
      function run(){
        
        console.log('scene Loaded');
        
        
        enterButton.innerHTML = "ENTER";
        enterButton.style.cursor = "pointer";
        enterButton.style.opacity = "1";
        enterButton.style.background = "lightgrey";
        enterButton.style.color = "black";
        
        
        enterButton.addEventListener("click", checkUsername);
        
        /*window.setTimeout(function(){
          toggleMic();
        }, 4000);*/
      }
      
      
      
    
    
    </script>

    <!-- FLY 
    <script>
      function fly() {
        let flyMode = player.getAttribute("movement-controls").fly;
        console.log(flyMode);

        if (flyMode == false) {
          player.setAttribute("movement-controls", "fly", true);
        } else {
          player.setAttribute("movement-controls", "fly", false);
        }
      }
    </script>-->
    
    
    <!--SUBTITLES -->
    
    <script type="text/javascript">

        // don't add this listener until all DOM content is loaded

        /*document.addEventListener("DOMContentLoaded", function () {
            let trackDespAlv = document.getElementById("trackDespAlv");
            trackDespAlv.addEventListener("cuechange", function () {
                let myTrack = this.track;
                let myCues = myTrack.activeCues;      // array of current cues.
                //  display the start and end time, and cue text
                if (myCues.length > 0) {
                    let disp = document.getElementById("subDespAlv");
                    disp.innerHTML = myCues[0].getCueAsHTML().textContent;
                }
            }, false);
        
            

            
        }, false);*/
      
      
      document.addEventListener("DOMContentLoaded", function () {
            //let trackDespAlv = document.getElementById("trackDespAlv");
            
        let tracks = document.getElementsByClassName('tracks');

        for(let i=0; i<tracks.length; i++){

          let id = tracks[i].id;
          let subId = "sub" + id;
          
          tracks[i].addEventListener("cuechange", function () {
            let myTrack = this.track;
            let myCues = myTrack.activeCues;      // array of current cues.
            //  display the start and end time, and cue text
            if (myCues.length > 0) {
                let disp = document.getElementById(subId);
                disp.innerHTML = myCues[0].getCueAsHTML().textContent;
            }
          }, false);

        }
         

            
        }, false);
      
    </script>
    
    
  </body>
</html>
